---
title: "2017-07-17 Notebook"
output: html_notebook
---

Picking up from notebook of same name in SWOT project.
    
### Moving to a new project / package

I think it's time to switch to package-mode and focus on getting this to work with a single river's data, rather than staying in the Pepsi challenge workflow. Then come back here and repeat Pepsi using the package.

- Start with RStanTools
- Look at some other packages and see how they implemented it.
    - [rstanarm](https://github.com/stan-dev/rstanarm) appears to be a good one.
- Follow [these guidelines](https://cran.r-project.org/web/packages/rstantools/vignettes/developer-guidelines.html)

```{r, eval = FALSE}
devtools::install_github("stan-dev/rstantools")
library(rstantools)
```

### Getting a dataset from Pepsi

```{r}
library(dplyr)
library(tidyr)
load("../SWOT/cache/Pepsi.RData")

Po <- Pepsi %>% 
  filter(name == "Po") %>% 
  transmute(xs, time, dA, H, S, W, QWBM, Q, A0 = Ao)

Po_w <- Po %>% 
  select(xs, time, W) %>% 
  spread(key = xs, value = W, convert = TRUE) %>% 
  as.matrix()

Po_s <- Po %>% 
  select(xs, time, S) %>% 
  spread(key = xs, value = S, convert = TRUE) %>% 
  as.matrix()

Po_dA <- Po %>% 
  select(xs, time, dA) %>% 
  spread(key = xs, value = dA, convert = TRUE) %>% 
  as.matrix()

```

That's good for now. Calling it a day I think.

